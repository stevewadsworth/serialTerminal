{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../Terminal.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { onMount, beforeUpdate, afterUpdate } from \"svelte\";\n  import serial from \"./modules/serial\";\n\n  export let config = {};\n  export let localEcho = true;\n\n  let div;\n  let autoscroll;\n  let rxData = [];\n  let acc = [];\n  let line = \"\";\n\n  onMount(async function() {\n    const port = serial.openPort(config.path, config.baudRate, config.dataBits, config.parity, config.stopBits);\n    const parser = serial.addReadlineParser(port);\n    parser.on(\"data\", chunk => {\n      acc.push(chunk);\n      rxData = acc;\n    });\n\n    document.onkeypress = e => {\n      console.log(e);\n      // Auto scroll to the bottom on keypress\n      div.scrollTo(0, div.scrollHeight);\n      let key = e.key;\n      if (e.keyCode === 13) {\n        key = \"\\n\";\n      }\n      port.write(key);\n\n      if (localEcho) {\n        acc.push(key);\n        rxData = acc;\n      }\n    };\n  });\n\n  beforeUpdate(() => {\n    // Only scroll if we are at the bottom already\n    autoscroll =\n      div && div.offsetHeight + div.scrollTop > div.scrollHeight - 20;\n  });\n\n  afterUpdate(() => {\n    if (autoscroll) {\n      div.scrollTo(0, div.scrollHeight);\n    }\n  });\n</script>\n\n<style>\n  div {\n    position: absolute;\n    top: 0;\n    height: 100%;\n    width: 100%;\n    overflow: scroll;\n  }\n\n  div > pre {\n    text-align: left;\n    margin: 0;\n    font-family: \"Courier New\", Courier, monospace;\n  }\n</style>\n\n<div bind:this={div}>\n  {#each rxData as line}\n    <pre>{line}</pre>\n  {/each}\n</div>\n"
  ],
  "names": [],
  "mappings": "AAoDE,GAAG,8BAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,QAAQ,CAAE,MAAM,AAClB,CAAC,AAED,kBAAG,CAAG,GAAG,eAAC,CAAC,AACT,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,CAAC,CACT,WAAW,CAAE,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS,AAChD,CAAC"
}